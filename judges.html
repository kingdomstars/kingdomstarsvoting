<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Judges Panel â€“ Kingdom Stars</title>
</head>

<body>

<h1>ğŸ¯ Kingdom Stars â€“ Judges Panel</h1>
<p>Please score contestants fairly and prayerfully ğŸ™</p>

<hr>

<div id="judgeList"></div>

<!-- ğŸ”¥ FIREBASE SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<!-- ğŸ”§ MAIN SCRIPT -->
<script src="script.js"></script>

<!-- ğŸ” AUTH + JUDGING LOGIC -->
<script>
firebase.auth().onAuthStateChanged(user => {
  if (!user) {
    window.location.href = "login.html";
  }
});

// Load contestants for judges
db.collection("contestants").orderBy("name").onSnapshot(snapshot => {
  const list = document.getElementById("judgeList");
  list.innerHTML = "";

  snapshot.forEach(doc => {
    const d = doc.data();
    list.innerHTML += `
      <div style="margin-bottom:15px">
        <strong>${d.name}</strong><br>
        <small>${d.category}</small><br><br>

        Judge Score (0â€“100):<br>
        <input 
          type="number" 
          min="0" 
          max="100" 
          value="${d.judgeScore || 0}"
          onchange="updateScore('${doc.id}', this.value)"
        >
      </div>
      <hr>
    `;
  });
});

// Update score
function updateScore(id, score) {
  if (score < 0 || score > 100) {
    alert("Score must be between 0 and 100");
    return;
  }

  db.collection("contestants").doc(id).update({
    judgeScore: Number(score)
  });
}
</script>

</body>
</html>
